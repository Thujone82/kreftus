<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastermind - Terminal Code-Breaking Game</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#f4f4f4; color:#333; line-height:1.6; }
        header { background:#333; color:#fff; padding:1.5rem 0; text-align:center; margin-bottom:2rem; position: relative; }
        .github-link { position: absolute; top: 1.5rem; right: 2rem; display: inline-block; padding: 0.5rem; border-radius: 8px; transition: all 0.3s ease; background-color: rgba(255, 255, 255, 0.1); }
        .github-link:hover { background-color: rgba(255, 255, 255, 0.2); transform: scale(1.1); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
        .github-link img { width: 32px; height: 32px; display: block; }
        .home-link { position: absolute; top: 1.5rem; left: 2rem; display: inline-block; padding: 0.5rem; border-radius: 8px; transition: all 0.3s ease; background-color: rgba(255, 255, 255, 0.1); }
        .home-link:hover { background-color: rgba(255, 255, 255, 0.2); transform: scale(1.1); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
        .home-link img { width: 32px; height: 32px; display: block; }
        @media (max-width: 768px) { .github-link, .home-link { top: 1rem; padding: 0.4rem; } .github-link { right: 1rem; } .home-link { left: 1rem; } .github-link img, .home-link img { width: 28px; height: 28px; } }
        header h1 { margin:0; font-size:3rem; letter-spacing:2px; }
        .container { width:80%; margin:auto; overflow:hidden; }
        table { width:100%; border-collapse:collapse; margin-top:2rem; background:#fff; box-shadow:0 0 10px rgba(0,0,0,0.1); }
        td { padding:1rem; vertical-align:top; border-bottom:1px solid #ddd; }
        .project-image-cell { width:30%; max-width:256px; padding-right:1.5rem; }
        .project-image-cell img { width:100%; height:auto; max-width:256px; max-height:256px; display:block; border-radius:8px; }
        .project-text-cell { font-size:1rem; }
        .project-text-cell h2 { margin-top:0; color:#333; }
        .project-text-cell h3 { margin-top:1.5rem; margin-bottom:0.5rem; border-bottom:1px solid #ccc; padding-bottom:0.25rem; }
        .project-text-cell a { color:#007bff; text-decoration:none; }
        .project-text-cell a:hover { text-decoration:underline; }
        .readme-link { padding-left:1em; margin-top:-0.5em; font-size:0.9em; margin-bottom:1rem; }
        .project-text-cell .peg-r { color: #c00 !important; }
        .project-text-cell .peg-g { color: #080 !important; }
        .project-text-cell .peg-b { color: #06c !important; }
        .project-text-cell .peg-c { color: #09c !important; }
        .project-text-cell .peg-m { color: #c0c !important; }
        .project-text-cell .peg-y { color: #c90 !important; }
        @media (max-width:900px){ .project-image-cell, .project-text-cell{ display:block; width:100%; box-sizing:border-box; } .project-image-cell{ max-width:none; padding-right:0; padding-bottom:1rem; } .project-image-cell img{ width:auto; max-width:100%; margin:0; } }
    </style>
    <meta name="description" content="Mastermind is a terminal code-breaking game in Go. Guess the 4-peg secret in 12 turns with colored pegs and green/yellow feedback.">
</head>
<body>

    <header>
        <a href="../" class="home-link" title="Back to Home">
            <img src="../images/home.png" alt="Home">
        </a>
        <a href="https://github.com/Thujone82/kreftus" target="_blank" rel="noopener noreferrer" class="github-link" title="View on GitHub">
            <img src="../images/github-mark-white.png" alt="GitHub">
        </a>
        <h1>Mastermind - Terminal Code-Breaking Game</h1>
    </header>

    <div class="container">
        <table>
            <tbody>
                <tr class="project-row">
                    <td class="project-image-cell">
                        <img src="../images/mind.png" alt="Mastermind Game Screenshot">
                    </td>
                    <td class="project-text-cell">
                        <div>
                            <h2>M A S T E R M I N D</h2>
                            <p>
                                <b>Mastermind</b> is a terminal code-breaking game written in Go. Guess the secret code of 4 pegs in up to 12 turns. Each peg is one of six colors (<span class="peg-r">R⬤</span> <span class="peg-g">G⬤</span> <span class="peg-b">B⬤</span> <span class="peg-c">C⬤</span> <span class="peg-m">M⬤</span> <span class="peg-y">Y⬤</span> or 1–6). You type key-by-key and see colored pegs as you go; green pegs mean right color in the right slot, yellow pegs mean right color in the wrong slot. Use <code>-set rggm</code> or <code>-set 1225</code> to set a code for another player to guess. Playtime is shown when you win or run out of turns.
                            </p>
                            <h3>Controls</h3>
                            <p><span class="peg-r">R⬤</span> <span class="peg-g">G⬤</span> <span class="peg-b">B⬤</span> <span class="peg-c">C⬤</span> <span class="peg-m">M⬤</span> <span class="peg-y">Y⬤</span> or 1–6 for pegs, Backspace to remove last peg, Enter to submit (after 4 pegs), Esc or Ctrl+C to quit.</p>
                            <h3>Updates</h3>
                            <div id="updates-container">
                                <p>Loading updates...</p>
                            </div>

                            <h3>Downloads</h3>
                            <p><b>Go Build:</b> PC [ <a href="../go/mind/bin/win/x86/mind.exe">x86</a> / <a href="../go/mind/bin/win/x64/mind.exe">x64</a> ] Linux [ <a href="../go/mind/bin/linux/x86/mind">x86</a> / <a href="../go/mind/bin/linux/amd64/mind">amd64</a> ]</p>
                            <p class="readme-link">↳ <a href="../go/mind/README.md">README</a></p>
                            <h3>Features</h3>
                            <ul>
                                <li>Key-by-key input with colored pegs (⬤), Backspace and full-line redraw</li>
                                <li>Six colors: <span class="peg-r">R⬤</span> <span class="peg-g">G⬤</span> <span class="peg-b">B⬤</span> <span class="peg-c">C⬤</span> <span class="peg-m">M⬤</span> <span class="peg-y">Y⬤</span> (or 1–6); green/yellow feedback pegs</li>
                                <li>Start screen with clear rules; Ctrl+C and Esc exit cleanly</li>
                                <li><code>-set &lt;code&gt;</code> for two-player (one sets, one guesses)</li>
                                <li>Playtime shown on win or loss; Windows builds with optional icon</li>
                            </ul>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        // Fetch and display updates from GitHub API
        async function loadUpdates() {
            const updatesContainer = document.getElementById('updates-container');

            try {
                const response = await fetch('https://api.github.com/repos/Thujone82/kreftus/commits?sha=main&path=go/mind&per_page=3');

                if (!response.ok) {
                    throw new Error('Failed to fetch updates');
                }

                const commits = await response.json();

                if (commits.length === 0) {
                    updatesContainer.style.display = 'none';
                    return;
                }

                // Format timestamp from ISO 8601 to MMDDYY@HHMMSS
                function formatTimestamp(isoString) {
                    const date = new Date(isoString);
                    const month = String(date.getMonth() + 1).padStart(2, '0');
                    const day = String(date.getDate()).padStart(2, '0');
                    const year = String(date.getFullYear()).slice(-2);
                    const hours = String(date.getHours()).padStart(2, '0');
                    const minutes = String(date.getMinutes()).padStart(2, '0');
                    const seconds = String(date.getSeconds()).padStart(2, '0');

                    return `${month}${day}${year}@${hours}${minutes}${seconds}`;
                }

                // Clear loading message and add updates
                updatesContainer.innerHTML = '';

                commits.forEach(commit => {
                    const timestamp = formatTimestamp(commit.commit.author.date);
                    const message = commit.commit.message;

                    const updateElement = document.createElement('p');
                    updateElement.innerHTML = `<b>${timestamp}:</b> ${message}`;
                    updatesContainer.appendChild(updateElement);
                });

            } catch (error) {
                console.error('Error loading updates:', error);
                updatesContainer.parentElement.style.display = 'none';
            }
        }

        document.addEventListener('DOMContentLoaded', loadUpdates);
    </script>

</body>
</html>
